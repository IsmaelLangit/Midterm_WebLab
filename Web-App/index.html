<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>LibWaze</title>
	<Link rel="stylesheet" href="styles/classes.css" />
	<Link rel="stylesheet" href="styles/nav.css" />
	<Link rel="stylesheet" href="styles/typography.css" />
	<Link rel="icon" href="images/icon/icon.png">
	<script type="text/javascript" src="json/block.json"></script>
	<script type="text/javascript" src="json/range.json"></script>
</head>

<body>	

<nav>
        <div id="logo"><img src="images/icon/nav-icon.png"></div>

        <label for="drop" class="toggle">â˜°</label>
        <input type="checkbox" id="drop" />
            <ul class="menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="4thfloor.html">Fourth Floor</a></li>
                <li><a href="5thfloor.html">Fifth Floor</a></li>
                <li><a href="6thfloor.html">Sixth Floor</a></li>
            </ul>
</nav>

<script>
function myFunction(){
var inputcat = document.getElementById("mySelect").value;
var element = document.getElementById("text-search");
var num =document.getElementById("text-search").value;
var myObj1, myJSON1, text1, objBlock, myObj2, myJSON2, text2, objRange;

//Storing data (block):
myJSON1 = JSON.stringify(block);
localStorage.setItem("data1", myJSON1);

//Retrieving data(block):
text1 = localStorage.getItem("data1");
objBlock = JSON.parse(text1);

//Storing data (range):
myJSON2 = JSON.stringify(range);
localStorage.setItem("data2", myJSON2);

//Retrieving data(range):
text2 = localStorage.getItem("data2");
objRange = JSON.parse(text2);


var valid1;

for (var i = 0; i < objRange.length ; i++ ){
	let cat = objRange[i].category;
	var minRange = objRange[i].min;
	var maxRange = objRange[i].max;

	if (inputcat == cat){
		element.setAttribute("min", minRange);
		element.setAttribute("max", maxRange);
		valid1 = true;

	}
}

while (valid1 == true) {
	for (var i = 0; i < objBlock.length ; i++ ){
		let category = objBlock[i].category;
		var mincat = objBlock[i].min;
		var maxcat = objBlock[i].max;
		var floor = objBlock[i].floor;
		var valid2;

		if (inputcat == category && num >= mincat && num <= maxcat ){
			let target = floor +"thfloor.html"
			document.getElementById("output1").innerHTML = "You have searched for : " + category + "-" + num;
			document.getElementById("output2").innerHTML = "Result : " + "Located at the " + floor + "th floor of the library";
			document.getElementById("anchorpage").href = "4thfloor.html";
			localStorage.setItem("index", i);    
			valid2 = true;
		} 

		if (valid2 != true) {
			document.getElementById("output1").innerHTML = "";
			document.getElementById("output2").innerHTML = "";
		}
	}
}
}


</script>

<div class="top-page cover"> 
	<img id = "logotitle" src  ="images/icon/icon.png" alt="logo"> 
	<h1 id = "nametitle"> LibWaze </h1> 
	<h2 id = "descnametitle"> SHOWS ROUTES, FINDS BOOKS </h2>
	<a href="#about" class="scroll" data-speed="250"><img id = "arrow1" class = "arrow bounce" src  ="images/icon/arrow.png" alt="logo"></a>
</div>

<div class="content about-page" id="about">
	<div class = "subcontent" id = "intro">
	<h1> LibWaze </h1>
	<p><strong>Libwaze</strong> is a navigation web-application made to aid in Saint Louis University students' library use, which gives route towards the shelf where a particular book held at the SLU Libraries is located by keying in the book's call number (section and DDC number).
	</div>

	<div class = "subcontent" id = "easy">
		<img id = "easy-logo" src  ="images/icon/easy.png" alt="easy" onmouseover="this.src='images/icon/easy2.png'" onmouseout="this.src = 'images/icon/easy.png'">
		<h2> EASY </h2>
		<p> The interface is easy to understand and use. </p>
	</div>

	<div class = "subcontent" id = "interactive">
		<img id = "interactive-logo" src  ="images/icon/interactive.png" alt="interactive" onmouseover="this.src='images/icon/interactive2.png'" onmouseout="this.src = 'images/icon/interactive.png'">
		<h2> INTERACTIVE </h2>
		<p> When you start finding the location of the book or subsection, with one click, it shows the route on the map. </p>
	</div>

	<div class = "subcontent" id = "arrow">
	<a href="#start" class="scroll" data-speed="250"><img id = "arrow1" class = "arrow bounce" src  ="images/icon/arrowBlack.png" alt="logo"></a>
	</div>
	</div>


</div>

<div class="content start-page" id="start">
	<h2> Find the location of the book </h2>

	<div class = "left-content">
		<form id="form1">
			<span id ="section-span">Section:</span>:
			<select id="mySelect">
			  <option value="AS">AS</option>	
			  <option value="As-Pr">As-Pr</option>	
			  <option value="ASR">ASR</option>
              <option value="ArR">ArR</option>
			  <option value="F">F</option>	
			  <option value="FIC">FIC</option>
			  <option value="FR">FR</option>				  	
			  <option value="G">G</option>	
			  <option value="GN">GN</option>	
			  <option value="GR">GR</option>	
			  <option value="Hg">Hg</option>	
			  <option value="HgR">HgR</option>	
			  <option value="La">La</option>	
			  <option value="La-PR">La-PR</option>	
			  <option value="Li">Li</option>	
			  <option value="LiR">LiR</option>	
			  <option value="PP">PP</option>	
			  <option value="PS">PS</option>	
			  <option value="PS-PR">PS-PR</option>	
			  <option value="PSR">PSR</option>	
			  <option value="Re">Re</option>	
			  <option value="SS">SS</option>	
			  <option value="SSG-PR">SSG-PR</option>	
			  <option value="SS-PR">SS-PR</option>	
			</select>
		</form>

		

		<form id="form2" onsubmit="return false">
			<span id ="ddc-span">DDC Number : </span> 
			<input type="number" id="text-search" step=any required>

			<button id = "button-home" type="submit" onclick="myFunction()" formtarget="_self">FIND</button>
		</form>


		<div class = "output">
		<p id="output1"></p>
		<p id="output2"><a id="anchorpage" href=""></a></p>
		</div>


	</div>

	<div class = "right-content">
		<img id = "callnum" src  ="images/info/callnum.png" alt="call number">
	</div>

	<a href="#contact" class="scroll" data-speed="250"><img id = "arrow1" class = "arrow bounce" src  ="images/icon/arrow.png" alt="logo"></a>
</div>

<div class="content contact-page" id="contact">
	<h1>Contact LibWaze</h1>
	
	<div class = "subcontent" id = "email">
		<img id = "email-icon" src  ="images/icon/email.png" alt="e-mail icon">
		<h2>Mail Us</h2>
		<p>libwaze@gmail.com</p>
	</div>
	
	<div class = "subcontent" id = "message">
		<img id = "message-icon" src  ="images/icon/message.png" alt="message icon">
		<h2>Message Us</h2>
		<p>09XX-XXX-XXXX</p>
	</div>
	
	<div class = "subcontent" id = "call">
		<img id = "call-icon" src  ="images/icon/call.png" alt="call icon">
		<h2>Call Us</h2>
		<p>XXX-XXXX</p>
	</div>
	
	<div class = "subcontent" id = "fb">
		<img id = "fb-icon" src  ="images/icon/fb.png" alt="facebook icon">
		<h2>Follow Us On Facebook</h2>
		<p>libewaze@facebook.com</p>
	</div>
	
	<div class = "subcontent" id = "aboutUs">
		<h1>About Us</h1>
		<p></p>
	</div>
</div>


		<footer class="footerCenter">

			<a href="index.html"><img class="footerImg" src="images/icon/nav-icon.png"></img></a>
			<p class="footerName">Show Routes, Find Books &copy; 2017</p>

		</footer>

<script type="text/javascript">
	(function() {

     'use strict';

    // Feature Test
    if ( 'querySelector' in document && 'addEventListener' in window && Array.prototype.forEach ) {

        // Function to animate the scroll
        var smoothScroll = function (anchor, duration) {

            // Calculate how far and how fast to scroll
            var startLocation = window.pageYOffset;
            var endLocation = anchor.offsetTop;
            var distance = endLocation - startLocation;
            var increments = distance/(duration/16);
            var stopAnimation;

            // Scroll the page by an increment, and check if it's time to stop
            var animateScroll = function () {
                window.scrollBy(0, increments);
                stopAnimation();
            };

            // If scrolling down
            if ( increments >= 0 ) {
                // Stop animation when you reach the anchor OR the bottom of the page
                stopAnimation = function () {
                    var travelled = window.pageYOffset;
                    if ( (travelled >= (endLocation - increments)) || ((window.innerHeight + travelled) >= document.body.offsetHeight) ) {
                        clearInterval(runAnimation);
                    }
                };
            }
            // If scrolling up
            else {
                // Stop animation when you reach the anchor OR the top of the page
                stopAnimation = function () {
                    var travelled = window.pageYOffset;
                    if ( travelled <= (endLocation || 0) ) {
                        clearInterval(runAnimation);
                    }
                };
            }

            // Loop the animation function
            var runAnimation = setInterval(animateScroll, 16);
       
        };

        // Define smooth scroll links
        var scrollToggle = document.querySelectorAll('.scroll');

        // For each smooth scroll link
        [].forEach.call(scrollToggle, function (toggle) {

            // When the smooth scroll link is clicked
            toggle.addEventListener('click', function(e) {

                // Prevent the default link behavior
                e.preventDefault();

                // Get anchor link and calculate distance from the top
                var dataID = toggle.getAttribute('href');
                var dataTarget = document.querySelector(dataID);
                var dataSpeed = toggle.getAttribute('data-speed');

                // If the anchor exists
                if (dataTarget) {
                    // Scroll to the anchor
                    smoothScroll(dataTarget, dataSpeed || 500);
                }

            }, false);

        });

    }

 })();
</script>
</body>
</html>